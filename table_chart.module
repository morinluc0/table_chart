<?php

/**
 * @file
 * Table to chart module
 */

/**
 * Implements hook_library().
 */
function table_chart_library() {
  $libraries['tabletochart'] = array(
    'title' => 'Table to Chart',
    'version' => '1.0',
    'js' => array(
      drupal_get_path('module', 'table_chart') . '/table_chart.js' => array(
        'scope' => 'footer',
      ),
    ),
    'dependencies' => array(
      // Require jQuery UI core by System module.
      array('table_chart', 'morrisjs'),
      // Require our other library.
      array('table_chart', 'tabletojson'),
    ),
  );
  // Raphael
  $libraries['raphaeljs'] = array(
    'title' => 'Raphael',
    'version' => '2.1.2',
    'js' => array(
      libraries_get_path('raphael') . '/raphael-min.js' => array(
        'scope' => 'footer',
      ),
    ),
  );
  // Morris.js
  $libraries['morrisjs'] = array(
    'title' => 'Morris.js',
    'version' => '0.4.3',
    'website' => 'http://www.oesmith.co.uk/morris.js/',
    'js' => array(
      libraries_get_path('morris.js') . '/morris.min.js' => array(
        'scope' => 'footer',
      ),
    ),
    'css' => array(
      libraries_get_path('morris.js') . '/morris.css' => array(
        'type' => 'file',
      ),
    ),
    'dependencies' => array(
      // Require jQuery UI core by System module.
      array('table_chart', 'raphaeljs'),
    ),
  );
  // Table to JSON.
  $libraries['tabletojson'] = array(
    'title' => 'Table to JSON',
    'website' => 'http://lightswitch05.github.io/table-to-json/',
    'version' => '0.6',
    'js' => array(
      libraries_get_path('tabletojson') . '/lib/jquery.tabletojson.min.js' => array(
        'scope' => 'footer',
      ),
    ),
  );
  return $libraries;
}

/**
 * Implements hook_views_api().
 */
function table_chart_views_api() {
  return array(
    'api' => 3,
    'path' => drupal_get_path('module', 'table_chart') . '/views',
  );
}

/**
 * Implements hook_preprocess_views_view_table().
 */
function table_chart_preprocess_views_view_table(&$vars) {
  dpm($vars);
}